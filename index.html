<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset="utf-8">
    <title>Registration Count</title>

    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1">

    <script src="js/jquery-3.3.1.js"></script>

    <link rel="stylesheet" href="css/bootstrap.min.css">

    <script src="js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="dist/assets/owl.theme.default.min.css">

    <script src="dist/owl.carousel.min.js"></script>

    <link rel="stylesheet" type="text/css" href="css/styles_main.css">

    <script type="text/javascript" src="js/xml2json.js"></script>

    <script type="text/javascript">
        /*
            Initialize the page with data.
        */
        $(document).ready(function() {
            getTheDate();
            loadDbnPmb();
        })
    </script>

    <script type="text/javascript">
        var owl;
        $(document).ready(function() {
            owl = $(".owl-carousel").owlCarousel({
                loop: false,
                rewind: true,
                items: 1,
                autoplay: true,
                autoplayTimeout: 8000,
                speed: 300,
                autoplayHoverPause: true,
                dots: false,
                margin: 30,
                responsive:{
                    0:{
                        items:1
                    },
                    600:{
                        items:1
                    },
                    1000:{
                        items:1
                    }
                }
            });
            owl.on('changed.owl.carousel', function(event) {
                getTheDate();
                switch (event.item.index) {
                    case 0:
                        loadDbnPmb();
                        break;
                    case  1:
                        loadSaRoaInt();
                        break;
                    case 2:
                        loadMaleFemale();
                        break;
                }
            })
        })
    </script>

    <script type="text/javascript">
        function getTheDate() {
            var month, date, hour, min;
            var raw_date = new Date();
            date = raw_date.getDate();
            date = String(date);
            if (date.length == 1) {
                date = "0" + date;
            }
            var r_month = raw_date.getMonth();
            if (r_month == 0) {
                month = 'JAN';
            } else if (r_month == 1) {
                month = 'FEB';
            } else if (r_month == 2) {
                month = 'MAR';
            } else if (r_month == 3) {
                month = 'APR';
            } else if (r_month == 4) {
                month = 'MAY';
            } else if (r_month == 5) {
                month = 'JUN';
            } else if (r_month == 6) {
                month = 'JUL';
            } else if (r_month == 7) {
                month = 'AUG';
            } else if (r_month == 8) {
                month = 'SEP';
            } else if (r_month == 9) {
                month = 'OCT';
            } else if (r_month == 10) {
                month = 'NOV';
            } else if (r_month == 11) {
                month = 'DEC';
            }
            hour = raw_date.getHours();
            hour = String(hour);
            if(hour.length == 1) {
                hour = "0" + hour;
            }
            min = raw_date.getMinutes();
            min = String(min);
            if(min.length == 1) {
                min = "0" + min;
            }
            var totDate = date + " " + month + " "+ hour + ":" + min;
            $('.dateSec').html(totDate);
        }
    </script>

    <script type="text/javascript">
        function loadDbnPmb() {
            $.getJSON('https://api.allorigins.win/get?url=' + encodeURIComponent('https://secure.onreg.com/onreg2/users/reports_public.php?id=3820&list=true&type=xml&reportid=2006&checksum=3526a1aeb30b86b85067d203908808df'), function (data) {

            });
        }
    </script>

    <script type="text/javascript">
        function loadSaRoaInt() {
            $.getJSON('https://api.allorigins.win/get?url=' + encodeURIComponent('https://secure.onreg.com/onreg2/users/reports_public.php?id=3820&list=true&type=xml&reportid=2006&checksum=3526a1aeb30b86b85067d203908808df'), function (data) {
                var jsonObj = $.xml2json(data.contents);
                var entTOTAL = jsonObj.xml.reportdata.record[3].computed;
                var saTotal = jsonObj.xml.reportdata.record[0].computed;
                var roaTotal = jsonObj.xml.reportdata.record[1].computed;
                var intTotal = jsonObj.xml.reportdata.record[2].computed;

                var totalRegistered = '';
                var saPercent = ((Number(totalRegistered) / Number(entTOTAL)) * 100).toFixed(0);
                valuePercent = "(" + String(valuePercent) + "%)";

                $('#regsacount').html(saTotal);
                $('#regsapercent').html(saPercent);
                $('#regroacount').html(roaTotal);
                $('#regroapercent').html(roaPercent);
                $('#regintcount').html(intTotal);
                $('#regintpercent').html(intPercent);
                $('#regsaroainttotalcount').html(entTOTAL);
                $('#regsaroainttotalpercent').html(saroaintPercent);
            });
        }
    </script>

    <script type="text/javascript">
        function loadMaleFemale() {
            $.getJSON('https://api.allorigins.win/get?url=' + encodeURIComponent('https://secure.onreg.com/onreg2/users/reports_public.php?id=3820&list=true&type=xml&reportid=2007&checksum=358936464c8c8e9672756e8a79804b6b'), function (data) {
                var jsonObj = $.xml2json(data.contents);
                var entTOTAL = jsonObj.xml.reportdata.record[2].computed;
                var maleTotal = jsonObj.xml.reportdata.record[0].computed;
                var femaleTotal = jsonObj.xml.reportdata.record[1].computed;

                $('#regmalecount').html(maleTotal);
                $('#regfemalecount').html(femaleTotal);
                $('#regmfcount').html(entTOTAL);
            });
        }
    </script>

</head>

<body>
<div class="container-fluid" id="containerbox">
    <div class="row" id="header">
        <div class="col"><img class="img-fluid" src="images/championchiplogo-white.png" width="350" height="350" id="img1"></div>
        <div class="col"><img class=" img-fluid float-right" src="images/sizonqoba-logo.png" id="img2"></div>
    </div>
    <div class="row mt-2" id="content">
        <div class="col owl-carousel">
            <div class="slide">
                <div class="headers">
                    <h1>REGISTERED AS AT <span class="dateSec"></span></h1>
                </div>
                <div class="d-flex flex-column flex-cont">
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col"><p>Durban</p></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="durban-registered"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regdbnpercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col"><p>Pietermaritzburg</p></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="pmb-registered"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regpmbpercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col"><p>Total</p></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="total-registered"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regdbnpmbtotalpercent"></div>
                    </div>
                </div>
            </div>
            <div class="slide">
                <div class="headers">
                    <h1>REGISTERED AS AT <span class="dateSec"></span></h1></div>
                <div class="d-flex flex-column flex-cont">
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">South Africa</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regsacount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regsapercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">Rest of Africa</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regroacount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regroapercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-lg-8 col-md-8 col-sm-8 col">International</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regintcount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regintpercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">Total</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regsaroainttotalcount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regsaroainttotalpercent"></div>
                    </div>
                </div>
            </div>
            <div class="slide">
                <div class="headers">
                    <h1>REGISTERED AS AT <span class="dateSec"></span></h1>
                </div>
                <div class="d-flex flex-column flex-cont">
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">Male</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regmalecount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regmalepercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">Female</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regfemalecount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regfemalepercent"></div>
                    </div>
                    <div class="row item">
                        <div class="col-lg-8 col-md-8 col-sm-8 col">Total</div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col text-right" id="regmftotalcount"></div>
                        <div class="col-lg-2 col-md-2 col-sm-2 col" id="regmftotalpercent"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>